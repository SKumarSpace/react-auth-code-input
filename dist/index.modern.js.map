{"version":3,"file":"index.modern.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\r\n\r\ntype Props = {\r\n  characters?: number;\r\n  allowedCharacters?: RegExp;\r\n  onChange: (res: string) => void;\r\n  password?: boolean;\r\n  /**\r\n   * @deprecated Since version 1.2.0 Will be deleted in version 2.0. Use inputClassName instead.\r\n   */\r\n  inputStyle?: React.CSSProperties;\r\n  /**\r\n   * @deprecated Since version 1.2.0 Will be deleted in version 2.0. Use containerClassName instead.\r\n   */\r\n  containerStyle?: React.CSSProperties;\r\n  inputClassName?: string;\r\n  containerClassName?: string;\r\n  inputMode?: 'none' | 'text' | 'tel' | 'url' | 'email' | 'numeric' | 'decimal' | 'search';\r\n  title: string;\r\n};\r\n\r\nconst AuthCode: React.FC<Props> = ({\r\n  characters = 6,\r\n  allowedCharacters = '^[A-Za-z0-9]*$',\r\n  onChange,\r\n  password,\r\n  inputStyle,\r\n  containerStyle,\r\n  inputClassName,\r\n  containerClassName,\r\n  inputMode,\r\n  title\r\n}) => {\r\n  const inputsRef = useRef<Array<HTMLInputElement>>([]);\r\n\r\n  useEffect(() => {\r\n    inputsRef.current[0].focus();\r\n  }, []);\r\n\r\n  const sendResult = () => {\r\n    const res = inputsRef.current.map((input) => input.value).join('');\r\n    onChange(res);\r\n  };\r\n\r\n  const handleOnChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.value.match(allowedCharacters)) {\r\n      if (e.target.nextElementSibling !== null) {\r\n        (e.target.nextElementSibling as HTMLInputElement).focus();\r\n      }\r\n    } else {\r\n      e.target.value = '';\r\n    }\r\n    sendResult();\r\n  };\r\n\r\n  const handleOnKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n    const { key } = e;\r\n    const target = e.target as HTMLInputElement;\r\n    if (key === 'Backspace') {\r\n      if (target.value === '' && target.previousElementSibling !== null) {\r\n        if (target.previousElementSibling !== null) {\r\n          (target.previousElementSibling as HTMLInputElement).focus();\r\n          e.preventDefault();\r\n        }\r\n      } else {\r\n        target.value = '';\r\n      }\r\n      sendResult();\r\n    }\r\n  };\r\n\r\n  const handleOnFocus = (e: React.FocusEvent<HTMLInputElement>) => {\r\n    e.target.select();\r\n  };\r\n\r\n  const handleOnPaste = (e: React.ClipboardEvent<HTMLInputElement>) => {\r\n    const value = e.clipboardData.getData('Text');\r\n    if (value.match(allowedCharacters)) {\r\n      for (let i = 0; i < characters && i < value.length; i++) {\r\n        inputsRef.current[i].value = value.charAt(i);\r\n        if (inputsRef.current[i].nextElementSibling !== null) {\r\n          (inputsRef.current[i].nextElementSibling as HTMLInputElement).focus();\r\n        }\r\n      }\r\n      sendResult();\r\n    }\r\n    e.preventDefault();\r\n  };\r\n\r\n  const inputs = [];\r\n  for (let i = 0; i < characters; i++) {\r\n    inputs.push(\r\n      <input\r\n        key={i}\r\n        onChange={handleOnChange}\r\n        onKeyDown={handleOnKeyDown}\r\n        onFocus={handleOnFocus}\r\n        onPaste={handleOnPaste}\r\n        type={password ? 'password' : 'text'}\r\n        ref={(el: HTMLInputElement) => (inputsRef.current[i] = el)}\r\n        maxLength={1}\r\n        className={inputClassName}\r\n        style={inputStyle}\r\n        inputMode={inputMode}\r\n        title={`${title}-{i}`}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={containerClassName} style={containerStyle}>\r\n      {inputs}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AuthCode;\r\n"],"names":["AuthCode","characters","allowedCharacters","onChange","password","inputStyle","containerStyle","inputClassName","containerClassName","inputMode","title","inputsRef","useRef","useEffect","current","focus","sendResult","res","map","input","value","join","handleOnChange","e","target","match","nextElementSibling","handleOnKeyDown","key","previousElementSibling","preventDefault","handleOnFocus","select","handleOnPaste","clipboardData","getData","i","length","charAt","inputs","push","React","onKeyDown","onFocus","onPaste","type","ref","el","maxLength","className","style"],"mappings":"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"}